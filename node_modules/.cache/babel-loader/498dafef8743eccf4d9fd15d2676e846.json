{"ast":null,"code":"import _toConsumableArray from \"/home/moez/all_in_one_multikart_react/front-end/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/moez/all_in_one_multikart_react/front-end/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { ADD_TO_CART, REMOVE_FROM_CART, INCREMENT_QTY, DECREMENT_QTY } from \"../constants/ActionTypes\";\nexport default function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    cart: []\n  };\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_TO_CART:\n      var productId = action.product.id;\n      if (state.cart.findIndex(function (product) {\n        return product.id === productId;\n      }) !== -1) {\n        var cart = state.cart.reduce(function (cartAcc, product) {\n          if (product.id === productId) {\n            cartAcc.push(_objectSpread({}, product, {\n              qty: product.qty + 1,\n              sum: product.price * product.discount / 100 * (product.qty + 1)\n            })); // Increment qty\n          } else {\n            cartAcc.push(product);\n          }\n          return cartAcc;\n        }, []);\n        return _objectSpread({}, state, {\n          cart: cart\n        });\n      }\n      return _objectSpread({}, state, {\n        cart: [].concat(_toConsumableArray(state.cart), [_objectSpread({}, action.product, {\n          qty: action.qty,\n          sum: action.product.price * action.product.discount / 100 * action.qty\n        })])\n      });\n    case DECREMENT_QTY:\n      if (state.cart.findIndex(function (product) {\n        return product.id === action.productId;\n      }) !== -1) {\n        var _cart = state.cart.reduce(function (cartAcc, product) {\n          if (product.id === action.productId && product.qty > 1) {\n            //console.log('price: '+product.price+'Qty: '+product.qty)\n            cartAcc.push(_objectSpread({}, product, {\n              qty: product.qty - 1,\n              sum: product.price * product.discount / 100 * (product.qty - 1)\n            })); // Decrement qty\n          } else {\n            cartAcc.push(product);\n          }\n          return cartAcc;\n        }, []);\n        return _objectSpread({}, state, {\n          cart: _cart\n        });\n      }\n      return _objectSpread({}, state, {\n        cart: [].concat(_toConsumableArray(state.cart), [_objectSpread({}, action.product, {\n          qty: action.qty,\n          sum: action.product.price * action.qty\n        })])\n      });\n    case REMOVE_FROM_CART:\n      return {\n        cart: state.cart.filter(function (item) {\n          return item.id !== action.product_id.id;\n        })\n      };\n    default:\n  }\n  return state;\n}","map":{"version":3,"names":["ADD_TO_CART","REMOVE_FROM_CART","INCREMENT_QTY","DECREMENT_QTY","cartReducer","state","arguments","length","undefined","cart","action","type","productId","product","id","findIndex","reduce","cartAcc","push","_objectSpread","qty","sum","price","discount","concat","_toConsumableArray","filter","item","product_id"],"sources":["/home/moez/all_in_one_multikart_react/front-end/src/reducers/cart.js"],"sourcesContent":["import {\n    ADD_TO_CART,\n    REMOVE_FROM_CART,\n    INCREMENT_QTY,\n    DECREMENT_QTY } from \"../constants/ActionTypes\";\n\n\nexport default function cartReducer(state = {\n    cart: []\n}, action) {\n    switch (action.type) {\n        case ADD_TO_CART:\n            const productId = action.product.id\n            if (state.cart.findIndex(product => product.id === productId) !== -1) {\n                const cart = state.cart.reduce((cartAcc, product) => {\n                    if (product.id === productId) {\n                        cartAcc.push({ ...product, qty: product.qty+1, sum: (product.price*product.discount/100)*(product.qty+1) }) // Increment qty\n                    } else {\n                        cartAcc.push(product)\n                    }\n\n                    return cartAcc\n                }, [])\n\n                return { ...state, cart }\n            }\n\n            return { ...state, cart: [...state.cart, { ...action.product, qty: action.qty, sum: (action.product.price*action.product.discount/100)*action.qty }] }\n\n        case DECREMENT_QTY:\n            \n            if (state.cart.findIndex(product => product.id === action.productId) !== -1) {\n                const cart = state.cart.reduce((cartAcc, product) => {\n                    if (product.id === action.productId && product.qty > 1) {\n                        //console.log('price: '+product.price+'Qty: '+product.qty)\n                        cartAcc.push({ ...product, qty: product.qty-1, sum: (product.price*product.discount/100)*(product.qty-1) }) // Decrement qty\n                    } else {\n                        cartAcc.push(product)\n                    }\n\n                    return cartAcc\n                }, [])\n\n                return { ...state, cart }\n            }\n\n            return { ...state, cart: [...state.cart, { ...action.product, qty: action.qty, sum: action.product.price*action.qty }] }\n\n        case REMOVE_FROM_CART:\n            return {\n                cart: state.cart.filter(item => item.id !== action.product_id.id)\n            }\n\n        default:\n    }\n    return state;\n}\n"],"mappings":";;AAAA,SACIA,WAAW,EACXC,gBAAgB,EAChBC,aAAa,EACbC,aAAa,QAAQ,0BAA0B;AAGnD,eAAe,SAASC,WAAWA,CAAA,EAExB;EAAA,IAFyBC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG;IACxCG,IAAI,EAAE;EACV,CAAC;EAAA,IAAEC,MAAM,GAAAJ,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EACL,QAAQE,MAAM,CAACC,IAAI;IACf,KAAKX,WAAW;MACZ,IAAMY,SAAS,GAAGF,MAAM,CAACG,OAAO,CAACC,EAAE;MACnC,IAAIT,KAAK,CAACI,IAAI,CAACM,SAAS,CAAC,UAAAF,OAAO;QAAA,OAAIA,OAAO,CAACC,EAAE,KAAKF,SAAS;MAAA,EAAC,KAAK,CAAC,CAAC,EAAE;QAClE,IAAMH,IAAI,GAAGJ,KAAK,CAACI,IAAI,CAACO,MAAM,CAAC,UAACC,OAAO,EAAEJ,OAAO,EAAK;UACjD,IAAIA,OAAO,CAACC,EAAE,KAAKF,SAAS,EAAE;YAC1BK,OAAO,CAACC,IAAI,CAAAC,aAAA,KAAMN,OAAO;cAAEO,GAAG,EAAEP,OAAO,CAACO,GAAG,GAAC,CAAC;cAAEC,GAAG,EAAGR,OAAO,CAACS,KAAK,GAACT,OAAO,CAACU,QAAQ,GAAC,GAAG,IAAGV,OAAO,CAACO,GAAG,GAAC,CAAC;YAAC,EAAE,CAAC,EAAC;UAChH,CAAC,MAAM;YACHH,OAAO,CAACC,IAAI,CAACL,OAAO,CAAC;UACzB;UAEA,OAAOI,OAAO;QAClB,CAAC,EAAE,EAAE,CAAC;QAEN,OAAAE,aAAA,KAAYd,KAAK;UAAEI,IAAI,EAAJA;QAAI;MAC3B;MAEA,OAAAU,aAAA,KAAYd,KAAK;QAAEI,IAAI,KAAAe,MAAA,CAAAC,kBAAA,CAAMpB,KAAK,CAACI,IAAI,IAAAU,aAAA,KAAOT,MAAM,CAACG,OAAO;UAAEO,GAAG,EAAEV,MAAM,CAACU,GAAG;UAAEC,GAAG,EAAGX,MAAM,CAACG,OAAO,CAACS,KAAK,GAACZ,MAAM,CAACG,OAAO,CAACU,QAAQ,GAAC,GAAG,GAAEb,MAAM,CAACU;QAAG;MAAG;IAExJ,KAAKjB,aAAa;MAEd,IAAIE,KAAK,CAACI,IAAI,CAACM,SAAS,CAAC,UAAAF,OAAO;QAAA,OAAIA,OAAO,CAACC,EAAE,KAAKJ,MAAM,CAACE,SAAS;MAAA,EAAC,KAAK,CAAC,CAAC,EAAE;QACzE,IAAMH,KAAI,GAAGJ,KAAK,CAACI,IAAI,CAACO,MAAM,CAAC,UAACC,OAAO,EAAEJ,OAAO,EAAK;UACjD,IAAIA,OAAO,CAACC,EAAE,KAAKJ,MAAM,CAACE,SAAS,IAAIC,OAAO,CAACO,GAAG,GAAG,CAAC,EAAE;YACpD;YACAH,OAAO,CAACC,IAAI,CAAAC,aAAA,KAAMN,OAAO;cAAEO,GAAG,EAAEP,OAAO,CAACO,GAAG,GAAC,CAAC;cAAEC,GAAG,EAAGR,OAAO,CAACS,KAAK,GAACT,OAAO,CAACU,QAAQ,GAAC,GAAG,IAAGV,OAAO,CAACO,GAAG,GAAC,CAAC;YAAC,EAAE,CAAC,EAAC;UAChH,CAAC,MAAM;YACHH,OAAO,CAACC,IAAI,CAACL,OAAO,CAAC;UACzB;UAEA,OAAOI,OAAO;QAClB,CAAC,EAAE,EAAE,CAAC;QAEN,OAAAE,aAAA,KAAYd,KAAK;UAAEI,IAAI,EAAJA;QAAI;MAC3B;MAEA,OAAAU,aAAA,KAAYd,KAAK;QAAEI,IAAI,KAAAe,MAAA,CAAAC,kBAAA,CAAMpB,KAAK,CAACI,IAAI,IAAAU,aAAA,KAAOT,MAAM,CAACG,OAAO;UAAEO,GAAG,EAAEV,MAAM,CAACU,GAAG;UAAEC,GAAG,EAAEX,MAAM,CAACG,OAAO,CAACS,KAAK,GAACZ,MAAM,CAACU;QAAG;MAAG;IAE1H,KAAKnB,gBAAgB;MACjB,OAAO;QACHQ,IAAI,EAAEJ,KAAK,CAACI,IAAI,CAACiB,MAAM,CAAC,UAAAC,IAAI;UAAA,OAAIA,IAAI,CAACb,EAAE,KAAKJ,MAAM,CAACkB,UAAU,CAACd,EAAE;QAAA;MACpE,CAAC;IAEL;EACJ;EACA,OAAOT,KAAK;AAChB","ignoreList":[]},"metadata":{},"sourceType":"module"}